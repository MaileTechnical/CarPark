-- BP 7.1.6 content: ModelClass syschar: 3 persistence-version: 7.1.6

INSERT INTO O_OBJ
	VALUES ("3a3a75e6-c4b3-4e1f-a602-56400d1c4c0c",
	'BarrierStatus',
	18,
	'BarrierStatus',
	'',
	"00000000-0000-0000-0000-000000000000");
INSERT INTO O_TFR
	VALUES ("63191854-a9b4-47e2-aae9-996940a69bd3",
	"3a3a75e6-c4b3-4e1f-a602-56400d1c4c0c",
	'CreatePolling',
	'Add an observation of this type to the ''script'' of a test case.
See Observation.AppendPolling for description.',
	"ba5eda7a-def5-0000-0000-000000000000",
	0,
	'create object instance bs of BarrierStatus;

create object instance obs of Observation;
relate bs to obs across R4;
bs.location = param.location;
bs.stand = param.stand;
bs.open = param.isopen; 

obs.AppendPolling( stimulus:param.stimulus,
                   pollInterval:param.pollInterval, 
                   timeLimit:param.timeLimit );
',
	1,
	'',
	"00000000-0000-0000-0000-000000000000",
	0);
INSERT INTO O_TPARM
	VALUES ("4533af45-e482-4a0e-b751-f0a8773e76f5",
	"63191854-a9b4-47e2-aae9-996940a69bd3",
	'pollInterval',
	"ba5eda7a-def5-0000-0000-000000000002",
	0,
	'',
	"7c74eff9-0d9e-444b-9ae8-af4b19f551ac",
	'');
INSERT INTO O_TPARM
	VALUES ("f2923cbc-8629-4bea-9673-2cca1214597c",
	"63191854-a9b4-47e2-aae9-996940a69bd3",
	'timeLimit',
	"ba5eda7a-def5-0000-0000-000000000002",
	0,
	'',
	"4533af45-e482-4a0e-b751-f0a8773e76f5",
	'');
INSERT INTO O_TPARM
	VALUES ("15ef758e-3b7d-469a-857f-1f5c7b1e64d7",
	"63191854-a9b4-47e2-aae9-996940a69bd3",
	'stimulus',
	"ba5eda7a-def5-0000-0000-000000000005",
	0,
	'',
	"00000000-0000-0000-0000-000000000000",
	'');
INSERT INTO O_TPARM
	VALUES ("e50a5ab2-afa5-4f5c-b416-642de958cb72",
	"63191854-a9b4-47e2-aae9-996940a69bd3",
	'location',
	"ba5eda7a-def5-0000-0000-000000000004",
	0,
	'',
	"15ef758e-3b7d-469a-857f-1f5c7b1e64d7",
	'');
INSERT INTO O_TPARM
	VALUES ("7c74eff9-0d9e-444b-9ae8-af4b19f551ac",
	"63191854-a9b4-47e2-aae9-996940a69bd3",
	'isopen',
	"ba5eda7a-def5-0000-0000-000000000001",
	0,
	'',
	"4e1f8c5d-c75c-4a6e-981d-a579711dd35f",
	'');
INSERT INTO O_TPARM
	VALUES ("4e1f8c5d-c75c-4a6e-981d-a579711dd35f",
	"63191854-a9b4-47e2-aae9-996940a69bd3",
	'stand',
	"ba5eda7a-def5-0000-0000-000000000004",
	0,
	'',
	"e50a5ab2-afa5-4f5c-b416-642de958cb72",
	'');
INSERT INTO O_TFR
	VALUES ("1d563d5d-4d85-42ae-8863-47d90b19a3ae",
	"3a3a75e6-c4b3-4e1f-a602-56400d1c4c0c",
	'CheckStatus',
	'When invoked, search any existing notifications looking for a match.',
	"ba5eda7a-def5-0000-0000-000000000000",
	1,
	'LOG::LogInfo( message:" --- Checking for barrier status at " + self.location + " " + self.stand );
select one obs related by self->Observation[R4]; 

select any b from instances of BarrierCommand
 where ( selected.location == self.location ) 
 and ( selected.stand == self.stand );
if ( not_empty b )
  if ( b.open == self.open )
    delete object instance b;
    obs.Complete( success:True );
  end if;
else
  success = False;	// @TODO here to allow breakpoint only
end if;
',
	1,
	'',
	"63191854-a9b4-47e2-aae9-996940a69bd3",
	0);
INSERT INTO O_NBATTR
	VALUES ("eb46d4fb-2ab1-42b2-a131-072df1efaf6a",
	"3a3a75e6-c4b3-4e1f-a602-56400d1c4c0c");
INSERT INTO O_BATTR
	VALUES ("eb46d4fb-2ab1-42b2-a131-072df1efaf6a",
	"3a3a75e6-c4b3-4e1f-a602-56400d1c4c0c");
INSERT INTO O_ATTR
	VALUES ("eb46d4fb-2ab1-42b2-a131-072df1efaf6a",
	"3a3a75e6-c4b3-4e1f-a602-56400d1c4c0c",
	"00000000-0000-0000-0000-000000000000",
	'location',
	'',
	'',
	'location',
	0,
	"ba5eda7a-def5-0000-0000-000000000004",
	'',
	'');
INSERT INTO O_NBATTR
	VALUES ("589f629c-05e1-42fc-b93a-c02e3dede145",
	"3a3a75e6-c4b3-4e1f-a602-56400d1c4c0c");
INSERT INTO O_BATTR
	VALUES ("589f629c-05e1-42fc-b93a-c02e3dede145",
	"3a3a75e6-c4b3-4e1f-a602-56400d1c4c0c");
INSERT INTO O_ATTR
	VALUES ("589f629c-05e1-42fc-b93a-c02e3dede145",
	"3a3a75e6-c4b3-4e1f-a602-56400d1c4c0c",
	"7cadbf20-82b8-4f29-919b-77e81b54bd68",
	'open',
	'',
	'',
	'open',
	0,
	"ba5eda7a-def5-0000-0000-000000000001",
	'',
	'');
INSERT INTO O_NBATTR
	VALUES ("7cadbf20-82b8-4f29-919b-77e81b54bd68",
	"3a3a75e6-c4b3-4e1f-a602-56400d1c4c0c");
INSERT INTO O_BATTR
	VALUES ("7cadbf20-82b8-4f29-919b-77e81b54bd68",
	"3a3a75e6-c4b3-4e1f-a602-56400d1c4c0c");
INSERT INTO O_ATTR
	VALUES ("7cadbf20-82b8-4f29-919b-77e81b54bd68",
	"3a3a75e6-c4b3-4e1f-a602-56400d1c4c0c",
	"eb46d4fb-2ab1-42b2-a131-072df1efaf6a",
	'stand',
	'',
	'',
	'stand',
	0,
	"ba5eda7a-def5-0000-0000-000000000004",
	'',
	'');
INSERT INTO O_ID
	VALUES (0,
	"3a3a75e6-c4b3-4e1f-a602-56400d1c4c0c");
INSERT INTO O_ID
	VALUES (1,
	"3a3a75e6-c4b3-4e1f-a602-56400d1c4c0c");
INSERT INTO O_ID
	VALUES (2,
	"3a3a75e6-c4b3-4e1f-a602-56400d1c4c0c");
INSERT INTO PE_PE
	VALUES ("3a3a75e6-c4b3-4e1f-a602-56400d1c4c0c",
	1,
	"3430745e-1746-4e96-ac58-2ee3ee684b20",
	"00000000-0000-0000-0000-000000000000",
	4);
INSERT INTO EP_PKG_PROXY
	VALUES ("3430745e-1746-4e96-ac58-2ee3ee684b20",
	"00000000-0000-0000-0000-000000000000",
	"87ff681e-390e-45ca-9f9c-e0259790ea6c",
	'Testbench',
	'',
	0,
	'../Testbench.xtuml');
