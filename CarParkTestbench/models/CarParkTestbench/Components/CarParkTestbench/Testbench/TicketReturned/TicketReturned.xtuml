-- BP 7.1.6 content: ModelClass syschar: 3 persistence-version: 7.1.6

INSERT INTO O_OBJ
	VALUES ("5222933c-00db-4d32-b3a2-cf0a83991436",
	'TicketReturned',
	27,
	'TicketReturned',
	'Observe that a ticket is returned at a pay station.
It may be returned due to cancellation as well as full payment.',
	"00000000-0000-0000-0000-000000000000");
INSERT INTO O_TFR
	VALUES ("1d410a38-a4bd-4b18-9622-b3ed27359bda",
	"5222933c-00db-4d32-b3a2-cf0a83991436",
	'CreatePolling',
	'Add an observation of this type to the ''script'' of a test case.
See Observation.AppendPolling for description.',
	"ba5eda7a-def5-0000-0000-000000000000",
	0,
	'create object instance tr of TicketReturned;

create object instance obs of Observation;
relate tr to obs across R4;
tr.location = param.location;

obs.AppendPolling( stimulus:param.stimulus,
                   pollInterval:param.pollInterval, 
                   timeLimit:param.timeLimit );
',
	1,
	'',
	"00000000-0000-0000-0000-000000000000",
	0);
INSERT INTO O_TPARM
	VALUES ("19ece96a-b80e-459e-9629-1e9b8fffed09",
	"1d410a38-a4bd-4b18-9622-b3ed27359bda",
	'pollInterval',
	"ba5eda7a-def5-0000-0000-000000000002",
	0,
	'',
	"3d3ce33c-980c-43f8-b231-7cab60e394e0",
	'');
INSERT INTO O_TPARM
	VALUES ("d3be3d15-3df2-4825-952d-be6e1c58049f",
	"1d410a38-a4bd-4b18-9622-b3ed27359bda",
	'timeLimit',
	"ba5eda7a-def5-0000-0000-000000000002",
	0,
	'',
	"19ece96a-b80e-459e-9629-1e9b8fffed09",
	'');
INSERT INTO O_TPARM
	VALUES ("2bc8c178-fc02-4a13-9338-fed691a9f2e3",
	"1d410a38-a4bd-4b18-9622-b3ed27359bda",
	'stimulus',
	"ba5eda7a-def5-0000-0000-000000000005",
	0,
	'',
	"00000000-0000-0000-0000-000000000000",
	'');
INSERT INTO O_TPARM
	VALUES ("3d3ce33c-980c-43f8-b231-7cab60e394e0",
	"1d410a38-a4bd-4b18-9622-b3ed27359bda",
	'location',
	"ba5eda7a-def5-0000-0000-000000000004",
	0,
	'',
	"2bc8c178-fc02-4a13-9338-fed691a9f2e3",
	'');
INSERT INTO O_TFR
	VALUES ("96bc575a-109f-49be-97d0-a7153d1b0154",
	"5222933c-00db-4d32-b3a2-cf0a83991436",
	'CheckReturned',
	'When invoked, search any existing notifications looking for a match.',
	"ba5eda7a-def5-0000-0000-000000000000",
	1,
	'LOG::LogInfo( message:" --- Checking for ticket returned at " + self.location );
select one obs related by self->Observation[R4]; 

select any stay from instances of Stay
 where ( selected.payingAt == self.location );
if ( not_empty stay )
  obs.Complete( success:True );
else
  success = False;	// @TODO here to allow breakpoint only
end if;
',
	1,
	'',
	"4565bd20-994c-449d-bcff-1ab853c71baf",
	0);
INSERT INTO O_TFR
	VALUES ("4565bd20-994c-449d-bcff-1ab853c71baf",
	"5222933c-00db-4d32-b3a2-cf0a83991436",
	'CreateTriggered',
	'Add an observation of this type to the ''script'' of a test case.
See Observation.AppendPolling for description.',
	"ba5eda7a-def5-0000-0000-000000000000",
	0,
	'create object instance tr of TicketReturned;

create object instance obs of Observation;
relate tr to obs across R4;
tr.location = param.location;

obs.AppendTriggered( stimulus:param.stimulus, key:"TicketReturned",
                   pollInterval:0, 
                   timeLimit:0 );
',
	1,
	'',
	"1d410a38-a4bd-4b18-9622-b3ed27359bda",
	0);
INSERT INTO O_TPARM
	VALUES ("29c7c540-dfde-47c9-bbb4-1bd2015f10f2",
	"4565bd20-994c-449d-bcff-1ab853c71baf",
	'stimulus',
	"ba5eda7a-def5-0000-0000-000000000005",
	0,
	'',
	"00000000-0000-0000-0000-000000000000",
	'');
INSERT INTO O_TPARM
	VALUES ("7a7f4e73-62ba-4245-88a1-9b07dbe1238a",
	"4565bd20-994c-449d-bcff-1ab853c71baf",
	'location',
	"ba5eda7a-def5-0000-0000-000000000004",
	0,
	'',
	"29c7c540-dfde-47c9-bbb4-1bd2015f10f2",
	'');
INSERT INTO O_NBATTR
	VALUES ("178adcab-7277-4875-ba4a-fa59c32e69b5",
	"5222933c-00db-4d32-b3a2-cf0a83991436");
INSERT INTO O_BATTR
	VALUES ("178adcab-7277-4875-ba4a-fa59c32e69b5",
	"5222933c-00db-4d32-b3a2-cf0a83991436");
INSERT INTO O_ATTR
	VALUES ("178adcab-7277-4875-ba4a-fa59c32e69b5",
	"5222933c-00db-4d32-b3a2-cf0a83991436",
	"00000000-0000-0000-0000-000000000000",
	'location',
	'',
	'',
	'location',
	0,
	"ba5eda7a-def5-0000-0000-000000000004",
	'',
	'');
INSERT INTO O_NBATTR
	VALUES ("01d51f98-12fc-411e-8c05-785abf0c4f06",
	"5222933c-00db-4d32-b3a2-cf0a83991436");
INSERT INTO O_BATTR
	VALUES ("01d51f98-12fc-411e-8c05-785abf0c4f06",
	"5222933c-00db-4d32-b3a2-cf0a83991436");
INSERT INTO O_ATTR
	VALUES ("01d51f98-12fc-411e-8c05-785abf0c4f06",
	"5222933c-00db-4d32-b3a2-cf0a83991436",
	"178adcab-7277-4875-ba4a-fa59c32e69b5",
	'number',
	'',
	'',
	'number',
	0,
	"ba5eda7a-def5-0000-0000-000000000002",
	'',
	'');
INSERT INTO O_ID
	VALUES (0,
	"5222933c-00db-4d32-b3a2-cf0a83991436");
INSERT INTO O_ID
	VALUES (1,
	"5222933c-00db-4d32-b3a2-cf0a83991436");
INSERT INTO O_ID
	VALUES (2,
	"5222933c-00db-4d32-b3a2-cf0a83991436");
INSERT INTO PE_PE
	VALUES ("5222933c-00db-4d32-b3a2-cf0a83991436",
	1,
	"3430745e-1746-4e96-ac58-2ee3ee684b20",
	"00000000-0000-0000-0000-000000000000",
	4);
INSERT INTO EP_PKG_PROXY
	VALUES ("3430745e-1746-4e96-ac58-2ee3ee684b20",
	"00000000-0000-0000-0000-000000000000",
	"87ff681e-390e-45ca-9f9c-e0259790ea6c",
	'Testbench',
	'',
	0,
	'../Testbench.xtuml');
