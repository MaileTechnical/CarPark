-- BP 7.1.6 content: ModelClass syschar: 3 persistence-version: 7.1.6

INSERT INTO O_OBJ
	VALUES ("3a3a75e6-c4b3-4e1f-a602-56400d1c4c0c",
	'BarrierCheck',
	18,
	'BarrierCheck',
	'An observation which checks for expected barrier status - open/closed.',
	"00000000-0000-0000-0000-000000000000");
INSERT INTO O_TFR
	VALUES ("63191854-a9b4-47e2-aae9-996940a69bd3",
	"3a3a75e6-c4b3-4e1f-a602-56400d1c4c0c",
	'Create',
	'Add an observation of this type to the ''script'' of a test case.
See Observation.AppendPolling for description.',
	"ba5eda7a-def5-0000-0000-000000000000",
	0,
	'create object instance check of BarrierCheck;

create object instance observation of Observation;
relate check to observation across R400;
check.location = param.location;
check.stand = param.stand;
check.state = param.state;

observation.Add( seqLabel:param.seqLabel, pollInterval:0, timeLimit:0, key:"BarrierCommand", concurrent:True );',
	1,
	'',
	"00000000-0000-0000-0000-000000000000",
	0);
INSERT INTO O_TPARM
	VALUES ("e50a5ab2-afa5-4f5c-b416-642de958cb72",
	"63191854-a9b4-47e2-aae9-996940a69bd3",
	'location',
	"ba5eda7a-def5-0000-0000-000000000004",
	0,
	'',
	"86845459-968f-4013-a535-ec44d2c8dfa9",
	'');
INSERT INTO O_TPARM
	VALUES ("7c74eff9-0d9e-444b-9ae8-af4b19f551ac",
	"63191854-a9b4-47e2-aae9-996940a69bd3",
	'state',
	"f0c65a10-2e1e-4a19-8c3f-db9b478b5038",
	0,
	'',
	"4e1f8c5d-c75c-4a6e-981d-a579711dd35f",
	'');
INSERT INTO S_DT_PROXY
	VALUES ("f0c65a10-2e1e-4a19-8c3f-db9b478b5038",
	"00000000-0000-0000-0000-000000000000",
	'BarrierState',
	'',
	'',
	'../../../../../../../CarPark/models/CarPark/SharedTypes/SharedTypes.xtuml');
INSERT INTO O_TPARM
	VALUES ("4e1f8c5d-c75c-4a6e-981d-a579711dd35f",
	"63191854-a9b4-47e2-aae9-996940a69bd3",
	'stand',
	"ba5eda7a-def5-0000-0000-000000000004",
	0,
	'',
	"e50a5ab2-afa5-4f5c-b416-642de958cb72",
	'');
INSERT INTO O_TPARM
	VALUES ("86845459-968f-4013-a535-ec44d2c8dfa9",
	"63191854-a9b4-47e2-aae9-996940a69bd3",
	'seqLabel',
	"ba5eda7a-def5-0000-0000-000000000004",
	0,
	'',
	"00000000-0000-0000-0000-000000000000",
	'');
INSERT INTO O_TFR
	VALUES ("1d563d5d-4d85-42ae-8863-47d90b19a3ae",
	"3a3a75e6-c4b3-4e1f-a602-56400d1c4c0c",
	'CheckStatus',
	'When invoked, search any existing notifications looking for a match.',
	"ba5eda7a-def5-0000-0000-000000000000",
	1,
	'// Observe that the barrier at the specified entry/exit station is open or closed as appropriate.

LOG::LogInfo( message:" --- Checking for barrier status " + "at " + self.location + " " + self.stand );
select one observation related by self->Observation[R400]; 

select any bcmd from instances of BarrierCommand
 where ( selected.location == self.location ) 
 and ( selected.stand == self.stand );
if ( not_empty bcmd )
  if ( bcmd.state == self.state )
    observation.Complete( success:True );
  else
    observation.Complete( success:False );
  end if;
  delete object instance bcmd;
else
  observation.Complete( success:False );
end if;',
	1,
	'',
	"63191854-a9b4-47e2-aae9-996940a69bd3",
	0);
INSERT INTO O_NBATTR
	VALUES ("eb46d4fb-2ab1-42b2-a131-072df1efaf6a",
	"3a3a75e6-c4b3-4e1f-a602-56400d1c4c0c");
INSERT INTO O_BATTR
	VALUES ("eb46d4fb-2ab1-42b2-a131-072df1efaf6a",
	"3a3a75e6-c4b3-4e1f-a602-56400d1c4c0c");
INSERT INTO O_ATTR
	VALUES ("eb46d4fb-2ab1-42b2-a131-072df1efaf6a",
	"3a3a75e6-c4b3-4e1f-a602-56400d1c4c0c",
	"00000000-0000-0000-0000-000000000000",
	'location',
	'',
	'',
	'location',
	0,
	"ba5eda7a-def5-0000-0000-000000000004",
	'',
	'');
INSERT INTO O_NBATTR
	VALUES ("589f629c-05e1-42fc-b93a-c02e3dede145",
	"3a3a75e6-c4b3-4e1f-a602-56400d1c4c0c");
INSERT INTO O_BATTR
	VALUES ("589f629c-05e1-42fc-b93a-c02e3dede145",
	"3a3a75e6-c4b3-4e1f-a602-56400d1c4c0c");
INSERT INTO O_ATTR
	VALUES ("589f629c-05e1-42fc-b93a-c02e3dede145",
	"3a3a75e6-c4b3-4e1f-a602-56400d1c4c0c",
	"7cadbf20-82b8-4f29-919b-77e81b54bd68",
	'state',
	'',
	'',
	'state',
	0,
	"f0c65a10-2e1e-4a19-8c3f-db9b478b5038",
	'',
	'');
INSERT INTO O_NBATTR
	VALUES ("7cadbf20-82b8-4f29-919b-77e81b54bd68",
	"3a3a75e6-c4b3-4e1f-a602-56400d1c4c0c");
INSERT INTO O_BATTR
	VALUES ("7cadbf20-82b8-4f29-919b-77e81b54bd68",
	"3a3a75e6-c4b3-4e1f-a602-56400d1c4c0c");
INSERT INTO O_ATTR
	VALUES ("7cadbf20-82b8-4f29-919b-77e81b54bd68",
	"3a3a75e6-c4b3-4e1f-a602-56400d1c4c0c",
	"eb46d4fb-2ab1-42b2-a131-072df1efaf6a",
	'stand',
	'',
	'',
	'stand',
	0,
	"ba5eda7a-def5-0000-0000-000000000004",
	'',
	'');
INSERT INTO O_ID
	VALUES (0,
	"3a3a75e6-c4b3-4e1f-a602-56400d1c4c0c");
INSERT INTO O_ID
	VALUES (1,
	"3a3a75e6-c4b3-4e1f-a602-56400d1c4c0c");
INSERT INTO O_ID
	VALUES (2,
	"3a3a75e6-c4b3-4e1f-a602-56400d1c4c0c");
INSERT INTO PE_PE
	VALUES ("3a3a75e6-c4b3-4e1f-a602-56400d1c4c0c",
	1,
	"3430745e-1746-4e96-ac58-2ee3ee684b20",
	"00000000-0000-0000-0000-000000000000",
	4);
INSERT INTO EP_PKG_PROXY
	VALUES ("3430745e-1746-4e96-ac58-2ee3ee684b20",
	"00000000-0000-0000-0000-000000000000",
	"87ff681e-390e-45ca-9f9c-e0259790ea6c",
	'Testbench',
	'',
	0,
	'../Testbench.xtuml');
